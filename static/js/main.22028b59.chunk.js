(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{23:function(e,t,r){e.exports=r(35)},28:function(e,t,r){},35:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(19),u=r.n(c),s=(r(28),r(7)),o=r(2),l=r(1),i=r.n(l),p=r(6),m=r(16),h=r(11),d=r(12),f=r(22),b=r(21),v=Object(o.g)((function(e){var t=e.user,r=e.userId,a=e.album,c=e.albumId;return n.a.createElement("header",{className:"header"},n.a.createElement(s.b,{to:"/",className:"header__link"},"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"),r?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"header__slash"}," / "),n.a.createElement(s.b,{to:"/".concat(r),className:"header__link"},"".concat(t))):null,c?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"header__slash"}," / "),n.a.createElement(s.b,{to:"/".concat(r,"/").concat(c),className:"header__link"},"".concat(a))):null)})),k=Object(o.g)((function(e){var t=e.card,r=t.image,a=t.caption,c=t.id;return n.a.createElement(s.b,{to:"".concat(e.location.pathname.replace(/\/$/,""),"/").concat(c)},r?n.a.createElement("img",{src:r.src,alt:r.alt}):null,a?n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,a.title),n.a.createElement("h4",null,a.subtitle)):null)})),E=Object(o.g)((function(e){return n.a.createElement("main",null,e.data.map((function(t){return n.a.createElement(k,{key:"".concat(e.location.pathname.replace(/\/$/,""),"/").concat(t.id),card:t})})))})),y=new(function(){function e(t){Object(h.a)(this,e),this.baseUrl=t}return Object(d.a)(e,[{key:"template",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(this.baseUrl,"/").concat(t),{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Loading Error"))})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAlbums",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users/".concat(t,"/albums")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAlbum",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("albums/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPhotos",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("albums/".concat(t,"/photos")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())("https://jsonplaceholder.typicode.com"),g=Object(o.g)(function(e){Object(f.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(h.a)(this,r),(a=t.call(this,e)).state={isLoaded:!1,error:null,header:{},data:[]},a}return Object(d.a)(r,[{key:"updateState",value:function(){var e=this,t=this.props.match.params,a=t.userId,n=t.albumId,c={header:{userId:a,albumId:n},data:[]},u=[];u.push(r.renderHeader(a,n,c)),n?u.push(r.renderPhotos(n,c)):a?u.push(r.renderAlbums(a)):u.push(r.renderUsers()),Promise.all(u).then((function(e){c.header=Object(m.a)(Object(m.a)({},c.header),e[0]),c.data=e[1],c.isLoaded=!0})).catch((function(e){return c.error=e})).finally((function(){return e.setState(c)}))}},{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,r=t.userId,a=t.albumId,n=this.props.match.params,c=n.userId,u=n.albumId;c===r&&u===a||this.updateState()}},{key:"render",value:function(){return this.state.error?n.a.createElement(o.a,{to:"/error"}):this.state.isLoaded?n.a.createElement(n.a.Fragment,null,n.a.createElement(v,this.state.header),n.a.createElement(E,{data:this.state.data})):null}}],[{key:"renderHeader",value:function(){var e=Object(p.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,y.getAlbum(r);case 3:e.t0=e.sent.title,e.next=7;break;case 6:e.t0=null;case 7:if(a=e.t0,!t){e.next=14;break}return e.next=11,y.getUser(t);case 11:e.t1=e.sent.name,e.next=15;break;case 14:e.t1=null;case 15:return n=e.t1,e.abrupt("return",{user:n,album:a});case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"renderUsers",value:function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getUsers();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{id:e.id,caption:{title:e.name,subtitle:"@".concat(e.username)}}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAlbums",value:function(){var e=Object(p.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAlbums(t);case 2:return r=e.sent,e.next=5,Promise.all(r.map(function(){var e=Object(p.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getPhotos(t.id);case 2:return r=e.sent,e.abrupt("return",{id:t.id,caption:{title:t.title,subtitle:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439: ".concat(r.length)},image:{src:r[0].thumbnailUrl,alt:t.title}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderPhotos",value:function(){var e=Object(p.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getPhotos(t);case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return{id:e.id,image:{src:e.thumbnailUrl,alt:"".concat(e.title)}}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(n.a.Component)),x=function(){return n.a.createElement("main",{className:"error"},n.a.createElement("h1",{className:"error__title"},"\u041e\u0448\u0438\u0431\u043a\u0430"),n.a.createElement("h2",{className:"error__subtitle"},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 :("),n.a.createElement(s.b,{to:"/",className:"error__link"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))};function j(e){return n.a.createElement(s.a,null,n.a.createElement(o.d,null,n.a.createElement(o.b,{path:"/error",exact:!0},n.a.createElement(x,null)),n.a.createElement(o.b,{path:"/:userId/:albumId",component:g,exact:!0}),n.a.createElement(o.b,{path:"/:userId",component:g,exact:!0}),n.a.createElement(o.b,{path:"/",component:g,exact:!0}),n.a.createElement(o.a,{path:"*",to:"/error"})))}u.a.render(n.a.createElement(j,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.22028b59.chunk.js.map