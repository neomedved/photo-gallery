(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),u=a.n(c),s=(a(28),a(4)),o=a(2),l=a(1),i=a.n(l),p=a(7),m=a(11),h=a(12),d=a(13),f=a(22),b=a(21),v="/photo-gallery",E=Object(o.g)((function(e){var t=e.user,a=e.userId,r=e.album,c=e.albumId;return n.a.createElement("header",{className:"header"},n.a.createElement(s.b,{to:"".concat(v,"/"),className:"header__link"},"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"),a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"header__slash"}," / "),n.a.createElement(s.b,{to:"".concat(v,"/").concat(a),className:"header__link"},"".concat(t))):null,c?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"header__slash"}," / "),n.a.createElement(s.b,{to:"".concat(v,"/").concat(a,"/").concat(c),className:"header__link"},"".concat(r))):null)})),_=Object(o.g)((function(e){var t=e.card,a=t.image,r=t.caption,c=t.id;return n.a.createElement(s.b,{to:"".concat(e.url).concat(c),className:"cards__card"},a?n.a.createElement("img",{src:a.src,alt:a.alt,className:"cards__image"}):null,r?n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:"cards__title"},r.title),n.a.createElement("h4",{className:"cards__subtitle"},r.subtitle)):null)})),k=Object(o.g)((function(e){var t=e.url;return n.a.createElement("main",{className:"cards"},e.data.map((function(e){return n.a.createElement(_,{key:"".concat(t).concat(e.id),card:e,url:t})})))})),g=Object(o.g)((function(e){var t=e.src,a=e.alt,r=e.prevId,c=e.nextId,u=e.url;return n.a.createElement("div",{className:"popup"},n.a.createElement("div",{className:"popup__content"},n.a.createElement(s.b,{to:u,className:"popup__close"}),r?n.a.createElement(s.b,{to:"".concat(u).concat(r),className:"popup__switch popup__switch_left"},"<="):null,c?n.a.createElement(s.b,{to:"".concat(u).concat(c),className:"popup__switch popup__switch_right"},"=>"):null,n.a.createElement("img",{className:"popup__image",src:t,alt:a})))})),w=new(function(){function e(t){Object(h.a)(this,e),this.baseUrl=t}return Object(d.a)(e,[{key:"template",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(this.baseUrl,"/").concat(t),{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Loading Error"))})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAlbums",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users/".concat(t,"/albums")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAlbum",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("albums/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPhotos",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("albums/".concat(t,"/photos")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())("https://jsonplaceholder.typicode.com"),y=Object(o.g)(function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={isLoaded:!1,error:null,header:{},data:[]},r}return Object(d.a)(a,[{key:"updateState",value:function(){var e,t=this,r=this.props.match.params,n=r.userId,c=r.albumId,u=r.photoId,s=[];s.push(a.renderHeader(n,c)),c?s.push(a.renderPhotos(c,u)):n?s.push(a.renderAlbums(n)):s.push(a.renderUsers()),Promise.all(s).then((function(t){e=Object(m.a)(Object(m.a)({header:Object(m.a)(Object(m.a)({},t[0]),{},{userId:n,albumId:c})},t[1]),{},{isLoaded:!0})})).catch((function(t){return e={error:t}})).finally((function(){return t.setState(e)}))}},{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,a=t.userId,r=t.albumId,n=t.photoId,c=this.props.match.params,u=c.userId,s=c.albumId,o=c.photoId;u===a&&s===r&&o===n||this.updateState()}},{key:"render",value:function(){if(this.state.error)return n.a.createElement(o.a,{to:"".concat(v,"/error")});if(this.state.isLoaded){var e=this.state.header,t=e.userId,a=e.albumId,r="".concat(v,"/").concat(t?"".concat(t,"/"):"").concat(a?"".concat(a,"/"):"");return n.a.createElement(n.a.Fragment,null,n.a.createElement(E,this.state.header),n.a.createElement(k,{data:this.state.data,url:r}),this.state.popup?n.a.createElement(g,Object.assign({},this.state.popup,{url:r})):null)}return null}}],[{key:"renderHeader",value:function(){var e=Object(p.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,w.getAlbum(a);case 3:e.t0=e.sent.title,e.next=7;break;case 6:e.t0=null;case 7:if(r=e.t0,!t){e.next=14;break}return e.next=11,w.getUser(t);case 11:e.t1=e.sent.name,e.next=15;break;case 14:e.t1=null;case 15:return n=e.t1,e.abrupt("return",{user:n,album:r});case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"renderUsers",value:function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getUsers();case 2:return t=e.sent,e.abrupt("return",{data:t.map((function(e){return{id:e.id,caption:{title:e.name,subtitle:"@".concat(e.username)}}}))});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAlbums",value:function(){var e=Object(p.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAlbums(t);case 2:return a=e.sent,e.next=5,Promise.all(a.map(function(){var e=Object(p.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getPhotos(t.id);case 2:return a=e.sent,e.abrupt("return",{id:t.id,caption:{title:t.title,subtitle:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439: ".concat(a.length)},image:{src:a[0].thumbnailUrl,alt:t.title}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderPhotos",value:function(){var e=Object(p.a)(i.a.mark((function e(t,a){var r,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getPhotos(t);case 2:if(r=e.sent,n=null,c=r.map((function(e,t){return a===e.id.toString()&&(n={src:e.url,alt:e.title,prevId:t>0?r[t-1].id:null,nextId:t<r.length-1?r[t+1].id:null}),{id:e.id,image:{src:e.thumbnailUrl,alt:"".concat(e.title)}}})),!a||n){e.next=7;break}throw new Error("Invalid Request");case 7:return e.abrupt("return",{data:c,popup:n});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(n.a.Component)),x=function(){return n.a.createElement("main",{className:"error"},n.a.createElement("h1",{className:"error__title"},"\u041e\u0448\u0438\u0431\u043a\u0430"),n.a.createElement("h2",{className:"error__subtitle"},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 :("),n.a.createElement(s.b,{to:"".concat(v,"/"),className:"error__link"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))};function j(e){return n.a.createElement(s.a,null,n.a.createElement(o.d,null,n.a.createElement(o.b,{path:"".concat(v,"/error"),exact:!0},n.a.createElement(x,null)),n.a.createElement(o.b,{path:"".concat(v,"/:userId/:albumId/:photoId"),component:y,exact:!0}),n.a.createElement(o.b,{path:"".concat(v,"/:userId/:albumId"),component:y,exact:!0}),n.a.createElement(o.b,{path:"".concat(v,"/:userId"),component:y,exact:!0}),n.a.createElement(o.b,{path:"".concat(v,"/"),component:y,exact:!0}),n.a.createElement(o.a,{path:"*",to:"".concat(v,"/error")})))}u.a.render(n.a.createElement(j,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.ea4ab5e5.chunk.js.map