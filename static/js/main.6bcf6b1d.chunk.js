(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),u=a.n(c),s=(a(28),a(7)),o=a(2),l=a(1),i=a.n(l),p=a(6),m=a(16),h=a(11),d=a(12),f=a(22),b=a(21),v="/photo-gallery",k=Object(o.g)((function(e){var t=e.user,a=e.userId,r=e.album,c=e.albumId;return n.a.createElement("header",{className:"header"},n.a.createElement(s.b,{to:"".concat(v,"/"),className:"header__link"},"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"),a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"header__slash"}," / "),n.a.createElement(s.b,{to:"".concat(v,"/").concat(a),className:"header__link"},"".concat(t))):null,c?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"header__slash"}," / "),n.a.createElement(s.b,{to:"".concat(v,"/").concat(a,"/").concat(c),className:"header__link"},"".concat(r))):null)})),E=Object(o.g)((function(e){var t=e.card,a=t.image,r=t.caption,c=t.id;return n.a.createElement(s.b,{to:"".concat(e.location.pathname.replace(/\/$/,""),"/").concat(c),className:"cards__card"},a?n.a.createElement("img",{src:a.src,alt:a.alt,className:"cards__image"}):null,r?n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:"cards__title"},r.title),n.a.createElement("h4",{className:"cards__subtitle"},r.subtitle)):null)})),y=Object(o.g)((function(e){return n.a.createElement("main",{className:"cards"},e.data.map((function(t){return n.a.createElement(E,{key:"".concat(e.location.pathname.replace(/\/$/,""),"/").concat(t.id),card:t})})))})),g=new(function(){function e(t){Object(h.a)(this,e),this.baseUrl=t}return Object(d.a)(e,[{key:"template",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(this.baseUrl,"/").concat(t),{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Loading Error"))})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(p.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAlbums",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("users/".concat(t,"/albums")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAlbum",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("albums/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPhotos",value:function(){var e=Object(p.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.template("albums/".concat(t,"/photos")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())("https://jsonplaceholder.typicode.com"),x=Object(o.g)(function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={isLoaded:!1,error:null,header:{},data:[]},r}return Object(d.a)(a,[{key:"updateState",value:function(){var e=this,t=this.props.match.params,r=t.userId,n=t.albumId,c={header:{userId:r,albumId:n},data:[]},u=[];u.push(a.renderHeader(r,n,c)),n?u.push(a.renderPhotos(n,c)):r?u.push(a.renderAlbums(r)):u.push(a.renderUsers()),Promise.all(u).then((function(e){c.header=Object(m.a)(Object(m.a)({},c.header),e[0]),c.data=e[1],c.isLoaded=!0})).catch((function(e){return c.error=e})).finally((function(){return e.setState(c)}))}},{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,a=t.userId,r=t.albumId,n=this.props.match.params,c=n.userId,u=n.albumId;c===a&&u===r||this.updateState()}},{key:"render",value:function(){return this.state.error?n.a.createElement(o.a,{to:"".concat(v,"/error")}):this.state.isLoaded?n.a.createElement(n.a.Fragment,null,n.a.createElement(k,this.state.header),n.a.createElement(y,{data:this.state.data})):null}}],[{key:"renderHeader",value:function(){var e=Object(p.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,g.getAlbum(a);case 3:e.t0=e.sent.title,e.next=7;break;case 6:e.t0=null;case 7:if(r=e.t0,!t){e.next=14;break}return e.next=11,g.getUser(t);case 11:e.t1=e.sent.name,e.next=15;break;case 14:e.t1=null;case 15:return n=e.t1,e.abrupt("return",{user:n,album:r});case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"renderUsers",value:function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getUsers();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{id:e.id,caption:{title:e.name,subtitle:"@".concat(e.username)}}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAlbums",value:function(){var e=Object(p.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAlbums(t);case 2:return a=e.sent,e.next=5,Promise.all(a.map(function(){var e=Object(p.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getPhotos(t.id);case 2:return a=e.sent,e.abrupt("return",{id:t.id,caption:{title:t.title,subtitle:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439: ".concat(a.length)},image:{src:a[0].thumbnailUrl,alt:t.title}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderPhotos",value:function(){var e=Object(p.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getPhotos(t);case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return{id:e.id,image:{src:e.thumbnailUrl,alt:"".concat(e.title)}}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(n.a.Component)),j=function(){return n.a.createElement("main",{className:"error"},n.a.createElement("h1",{className:"error__title"},"\u041e\u0448\u0438\u0431\u043a\u0430"),n.a.createElement("h2",{className:"error__subtitle"},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 :("),n.a.createElement(s.b,{to:"".concat(v,"/"),className:"error__link"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))};function w(e){return n.a.createElement(s.a,null,n.a.createElement(o.d,null,n.a.createElement(o.b,{path:"".concat(v,"/error"),exact:!0},n.a.createElement(j,null)),n.a.createElement(o.b,{path:"".concat(v,"/:userId/:albumId"),component:x,exact:!0}),n.a.createElement(o.b,{path:"".concat(v,"/:userId"),component:x,exact:!0}),n.a.createElement(o.b,{path:"".concat(v,"/"),component:x,exact:!0}),n.a.createElement(o.a,{path:"*",to:"".concat(v,"/error")})))}u.a.render(n.a.createElement(w,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.6bcf6b1d.chunk.js.map